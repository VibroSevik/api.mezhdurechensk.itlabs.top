{# templates/admin/map_object/city_map/base_form.html.twig #}
{% extends ea.templatePath('layout') %}

{% set is_edit = app.request.attributes.get('_route') ends with '_edit' %}
{% set form = is_edit ? edit_form : new_form %}
{% form_theme form with ea.crud.formThemes only %}

{% trans_default_domain ea.i18n.translationDomain %}

{% block body_id is_edit ? 'ea-edit-' : 'ea-new-' ~ entity.name ~ '-' ~ entity.primaryKeyValue %}
{% block body_class is_edit ? 'ea-edit ea-edit-' : 'ea-new ea-new' ~ entity.name %}

{% set page_type = is_edit ? 'PAGE_EDIT' : 'PAGE_NEW' %}
{% set ea_field_assets = ea.crud.fieldAssets(constant('EasyCorp\\Bundle\\EasyAdminBundle\\Config\\Crud::' ~ page_type)) %}

{% block head_javascript %}
    {{ parent() }}
    <script src="{{ asset('form.js', ea.assets.defaultAssetPackageName) }}"></script>
{% endblock head_javascript %}

{% block configured_head_contents %}
    {{ parent() }}
    {% for htmlContent in ea_field_assets.headContents %}
        {{ htmlContent|raw }}
    {% endfor %}
{% endblock %}

{% block configured_body_contents %}
    {{ parent() }}
    {% for htmlContent in ea_field_assets.bodyContents %}
        {{ htmlContent|raw }}
    {% endfor %}
{% endblock %}

{% block configured_stylesheets %}
    {{ parent() }}
    {{ include('@EasyAdmin/includes/_css_assets.html.twig', { assets: ea_field_assets.cssAssets }, with_context = false) }}
    {{ include('@EasyAdmin/includes/_encore_link_tags.html.twig', { assets: ea_field_assets.webpackEncoreAssets }, with_context = false) }}
{% endblock %}

{% block configured_javascripts %}
    {{ parent() }}
    {{ include('@EasyAdmin/includes/_js_assets.html.twig', { assets: ea_field_assets.jsAssets }, with_context = false) }}
    {{ include('@EasyAdmin/includes/_encore_script_tags.html.twig', { assets: ea_field_assets.webpackEncoreAssets }, with_context = false) }}
{% endblock %}

{% block content_title %}
    {% set page_name = is_edit ? pageName : 'new' %}
    {% set entity_type = is_edit ? (entity ? entity.instance : null) : null %}
    {% set page_title = is_edit ? null : 'new' %}
    {%- set custom_page_title = ea.crud.customPageTitle(page_name, entity_type, ea.i18n.translationParameters, ea.i18n.translationDomain) -%}
    {{- custom_page_title is null
    ? ea.crud.defaultPageTitle(page_title, null, ea.i18n.translationParameters)|trans|raw
    : custom_page_title|trans|raw -}}
{% endblock %}

{% block page_actions %}
    {% for action in entity.actions %}
        {{ include(action.templatePath, { action: action }, with_context = false) }}
    {% endfor %}
{% endblock %}

{% block main %}
    {% if is_edit %}
        {% block edit_form %}
            {{ form(edit_form) }}
        {% endblock edit_form %}

        {% block delete_form %}
            {{ include('@EasyAdmin/crud/includes/_delete_form.html.twig', { entity_id: entity.primaryKeyValue }, with_context = false) }}
        {% endblock delete_form %}
    {% else %}
        {% block new_form %}
            {{ form(new_form) }}
        {% endblock new_form %}
    {% endif %}
{% endblock %}
